<mxfile host="app.diagrams.net" modified="2025-11-11T10:00:00.000Z" agent="python" version="20.1.3" editor="5.0.0">
  <diagram id="VR-Arch-1" name="VR Agent Architecture">
    <mxGraphModel dx="1420" dy="820" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
<mxCell id="1" parent="0"/>
    <mxCell id="b1" value="Data Extraction Layer
• Extracts from ServiceNow &amp; Fortify
• Sends findings to Core Engine" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1E88E5;fontStyle=1;" vertex="1" parent="1">
      <mxGeometry x="40" y="220" width="420" height="640" as="geometry"/>
    </mxCell>
    <mxCell id="img_servicenow" value="" style="shape=image;imageAspect=0;image=https://upload.wikimedia.org/wikipedia/commons/6/67/ServiceNow_logo.svg;whiteSpace=wrap;html=1;" vertex="1" parent="1" tooltip="ServiceNow">
      <mxGeometry x="60" y="280" width="160" height="40" as="geometry"/>
    </mxCell>
    <mxCell id="img_fortify" value="" style="shape=image;imageAspect=0;image=https://cdn.worldvectorlogo.com/logos/fortify.svg;whiteSpace=wrap;html=1;" vertex="1" parent="1" tooltip="Fortify">
      <mxGeometry x="60" y="340" width="140" height="40" as="geometry"/>
    </mxCell>
    <mxCell id="b2" value="Core Engine (VR Agent)
• Ingests findings
• Reviews &amp; fetches code from GitLab
• Searches Vector DB / KB
• Invokes LLM (GPT‑4.1)
• Produces fix" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#43A047;fontStyle=1;" vertex="1" parent="1">
      <mxGeometry x="500" y="220" width="420" height="640" as="geometry"/>
    </mxCell>
    <mxCell id="b2_vec" value="Vector DB / Knowledge Base (RAG)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#43A047;" vertex="1" parent="1">
      <mxGeometry x="520" y="290" width="380" height="110" as="geometry"/>
    </mxCell>
    <mxCell id="img_db" value="" style="shape=image;imageAspect=0;image=https://www.svgrepo.com/download/530267/database.svg;whiteSpace=wrap;html=1;" vertex="1" parent="1" tooltip="Vector DB / KB">
      <mxGeometry x="530" y="300" width="60" height="60" as="geometry"/>
    </mxCell>
    <mxCell id="b2_llm" value="LLM (ChatGPT 4.1)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#43A047;" vertex="1" parent="1">
      <mxGeometry x="520" y="415" width="380" height="110" as="geometry"/>
    </mxCell>
    <mxCell id="img_chatgpt" value="" style="shape=image;imageAspect=0;image=https://upload.wikimedia.org/wikipedia/commons/0/04/ChatGPT-Logo.svg;whiteSpace=wrap;html=1;" vertex="1" parent="1" tooltip="ChatGPT / LLM">
      <mxGeometry x="530" y="425" width="60" height="60" as="geometry"/>
    </mxCell>
    <mxCell id="b2_orch" value="Orchestration Process
(task routing, policies, sequencing)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#43A047;" vertex="1" parent="1">
      <mxGeometry x="520" y="540" width="380" height="110" as="geometry"/>
    </mxCell>
    <mxCell id="img_orch" value="" style="shape=image;imageAspect=0;image=https://www.svgrepo.com/download/375004/orchestrator.svg;whiteSpace=wrap;html=1;" vertex="1" parent="1" tooltip="Orchestration">
      <mxGeometry x="530" y="550" width="60" height="60" as="geometry"/>
    </mxCell>
    <mxCell id="postgres_layer" value="PostgreSQL (App metadata: app, owner, repo URL, etc.)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFDE7;strokeColor=#F9A825;fontStyle=1;" vertex="1" parent="1">
      <mxGeometry x="600" y="120" width="220" height="80" as="geometry"/>
    </mxCell>
    <mxCell id="img_postgres" value="" style="shape=image;imageAspect=0;image=https://upload.wikimedia.org/wikipedia/commons/2/29/Postgresql_elephant.svg;whiteSpace=wrap;html=1;" vertex="1" parent="1" tooltip="PostgreSQL">
      <mxGeometry x="610" y="130" width="60" height="60" as="geometry"/>
    </mxCell>
    <mxCell id="b3" value="GitLab
• Source code
• Merge Requests
• Line-level changes" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#E53935;fontStyle=1;" vertex="1" parent="1">
      <mxGeometry x="960" y="220" width="420" height="640" as="geometry"/>
    </mxCell>
    <mxCell id="img_gitlab" value="" style="shape=image;imageAspect=0;image=https://upload.wikimedia.org/wikipedia/commons/1/18/GitLab_logo.svg;whiteSpace=wrap;html=1;" vertex="1" parent="1" tooltip="GitLab">
      <mxGeometry x="980" y="280" width="160" height="48" as="geometry"/>
    </mxCell>
    <mxCell id="ui" value="AI Chatbot UI (two‑way conversation with Core Engine)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#8E24AA;fontStyle=1;" vertex="1" parent="1">
      <mxGeometry x="500" y="900" width="420" height="140" as="geometry"/>
    </mxCell>
    <mxCell id="img_ui" value="" style="shape=image;imageAspect=0;image=https://www.svgrepo.com/download/339963/chat-bot.svg;whiteSpace=wrap;html=1;" vertex="1" parent="1" tooltip="Chatbot UI">
      <mxGeometry x="510" y="920" width="80" height="80" as="geometry"/>
    </mxCell>
    <mxCell id="img_microfocus" value="" style="shape=image;imageAspect=0;image=https://upload.wikimedia.org/wikipedia/commons/b/bb/Micro_Focus_logo.svg;whiteSpace=wrap;html=1;" vertex="1" parent="1" tooltip="Fortify vendor (Micro Focus / OpenText)">
      <mxGeometry x="240" y="335" width="160" height="36" as="geometry"/>
    </mxCell>
    <mxCell id="e1" value="Findings / Vulnerabilities" style="endArrow=block;html=1;rounded=1;" edge="1" parent="1" source="b1" target="b2">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="e1a" value="" style="endArrow=block;html=1;rounded=1;" edge="1" parent="1" source="img_servicenow" target="b2">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="e1b" value="" style="endArrow=block;html=1;rounded=1;" edge="1" parent="1" source="img_fortify" target="b2">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="e2a" value="Raise MR (code changes)" style="endArrow=block;html=1;rounded=1;" edge="1" parent="1" source="b2" target="b3">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="e2b" value="Fetch code snippet by file &amp; line" style="endArrow=block;html=1;rounded=1;" edge="1" parent="1" source="b3" target="b2">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="e3a" value="Metadata lookup" style="endArrow=block;html=1;rounded=1;" edge="1" parent="1" source="postgres_layer" target="b2">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="e3b" value="Write audit / status" style="endArrow=block;html=1;rounded=1;" edge="1" parent="1" source="b2" target="postgres_layer">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="e4a" value="User prompts / clarifications" style="endArrow=block;html=1;rounded=1;" edge="1" parent="1" source="ui" target="b2">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="e4b" value="Explanations / status &amp; diffs" style="endArrow=block;html=1;rounded=1;" edge="1" parent="1" source="b2" target="ui">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="title" value="VR Agent – Vulnerability Remediation Architecture (draw.io for Confluence)" style="whiteSpace=wrap;html=1;strokeColor=none;fontStyle=1;fontSize=18;" vertex="1" parent="1">
      <mxGeometry x="40" y="20" width="1520" height="80" as="geometry"/>
    </mxCell>
    <mxCell id="legend" value="Flow:
1) Data Extraction pulls vulnerabilities from ServiceNow &amp; Fortify.
2) Core Engine fetches code (file + line) from GitLab.
3) Vector DB/KB provides guidance; LLM (GPT‑4.1) determines precise fix.
4) Engine applies patch via GitLab MR.
5) PostgreSQL stores metadata &amp; status.
6) UI Chat enables two‑way guidance with the Engine." style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FAFAFA;strokeColor=#BDBDBD;" vertex="1" parent="1">
      <mxGeometry x="40" y="1060" width="1520" height="120" as="geometry"/>
    </mxCell>
    <mxCell id="img_servicenow_small" value="" style="shape=image;imageAspect=0;image=https://upload.wikimedia.org/wikipedia/commons/6/67/ServiceNow_logo.svg;whiteSpace=wrap;html=1;" vertex="1" parent="1" tooltip="ServiceNow">
      <mxGeometry x="370" y="230" width="70" height="22" as="geometry"/>
    </mxCell>
    <mxCell id="img_fortify_small" value="" style="shape=image;imageAspect=0;image=https://cdn.worldvectorlogo.com/logos/fortify.svg;whiteSpace=wrap;html=1;" vertex="1" parent="1" tooltip="Fortify">
      <mxGeometry x="260" y="230" width="90" height="24" as="geometry"/>
    </mxCell>
    <mxCell id="img_openai" value="" style="shape=image;imageAspect=0;image=https://upload.wikimedia.org/wikipedia/commons/4/4d/OpenAI_Logo.svg;whiteSpace=wrap;html=1;" vertex="1" parent="1" tooltip="OpenAI">
      <mxGeometry x="810" y="425" width="90" height="28" as="geometry"/>
    </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>